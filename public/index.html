<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <title>Mozilla's X-Ray Goggles</title>
  </head>
  <body>
    <h1>X-Ray Goggles</h1>
    <p>They're pretty sweet.</p>
    <button>Go on, try them</button>
    <p>Or drag this link into your bookmark bar: <a href="">X-Ray Goggles</a></p>

    <script>
      var go = document.querySelector("button");
      var gogglesBaseURI = window.location.protocol + "//" + window.location.host;
      go.onclick = function() {
        var script = document.createElement('script');
        script.src = gogglesBaseURI + '/webxray.js';
        script.className='webxray';
        script.setAttribute('data-lang','en-US');
        script.setAttribute('data-baseuri', gogglesBaseURI);
        document.body.appendChild(script);
      };

      var bookmarklet = go.onclick.toString();
      bookmarklet = bookmarklet.replace(/gogglesBaseURI/g, "'" + gogglesBaseURI + "'");
      var lines = bookmarklet.split("\n").map(function(s) { return s.trim(); });

      document.querySelector("a").href = "javascript:(" + lines.join('') + "())";
    </script>
  </body>
</html>
